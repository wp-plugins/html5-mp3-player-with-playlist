function basename(e,t){var n=e.replace(/^.*[\/\\]/g,"");if(typeof t=="string"&&n.substr(n.length-t.length)==t){n=n.substr(0,n.length-t.length)}return n}looptrack=0;$(function(){var e=audiojs.createAll({trackEnded:function(){var e=looptrack==0?$("ol li.playing").next().next():$("ol li.playing");if(!e.length)e=$("ol li").first();e.addClass("playing").siblings().removeClass("playing");t.load($("a",e).attr("data-src"));t.play();$("#current-track"+id).html($("a",e).attr("title"));$("#current-play-pic"+id).attr("src",$("a",e).attr("name"))}});var t=e[0];first=$("ol li a").attr("data-src");$("ol li").first().addClass("playing");t.load(first);$("#current-track"+id).html($("ol li a").first().attr("title"));$("#current-play-pic"+id).attr("src",$("ol li a").first().attr("name"));$("ol li").click(function(e){e.preventDefault();$(this).addClass("playing").siblings().removeClass("playing");t.load($("a",this).attr("data-src"));t.play()});$(".track-name").click(function(e){$("#current-track"+id).html($(this).attr("title"));$("#current-play-pic"+id).attr("src",$(this).attr("name"))});$("#next_track"+id).click(function(){var e=$(".playing").next().next();if(!e.length)e=$(".Palylist01").first();if($("a",e).attr("title")!=null){$("#current-track"+id).html($("a",e).attr("title"));$("#current-play-pic"+id).attr("src",$("a",e).attr("name"))}e.click()});$("#prev_track"+id).click(function(){var e=$(".playing").prev().prev();if(!e.length)e=$(".Palylist01").last();if($("a",e).attr("title")!=null){$("#current-track"+id).html($("a",e).attr("title"));$("#current-play-pic"+id).attr("src",$("a",e).attr("name"))}e.click()});$("#play-pause"+id).click(function(){t.playPause()});$("#loop-track"+id).click(function(){$("#loop-track-box"+id).hide();$("#noloop-track-box"+id).show();looptrack=1});$("#noloop-track"+id).click(function(){$("#loop-track-box"+id).show();$("#noloop-track-box"+id).hide();looptrack=0});$("#shuffle-track"+id).click(function(){$("#shuffle-track-box"+id).hide();$("#noshuffle-track-box"+id).show();$(".track-name").each(function(e,t){$("#source"+id+e+"download").attr("href",$(this).attr("data-src"))})});$("#noshuffle-track"+id).click(function(){$("#shuffle-track-box"+id).show();$("#noshuffle-track-box"+id).hide()});var n=$("#Player-progressbar01"+id);leftPos=function(e){var t=0;if(e.offsetParent){do{t+=e.offsetLeft}while(e=e.offsetParent)}return t};$("#Player-progressbar01"+id).click(function(e){var n=e.clientX-leftPos(this);t.skipTo(n/parseInt(this.offsetWidth))});$(document).keydown(function(e){var n=e.charCode?e.charCode:e.keyCode;if(n==39){var r=$("li.playing").next().next();if(!r.length)r=$("ol li").first();r.click()}else if(n==37){var i=$("li.playing").prev().prev();if(!i.length)i=$("ol li").last();i.click()}else if(n==32){t.playPause()}});var r=["vol-0","vol-10","vol-20","vol-30","vol-40","vol-50","vol-60","vol-70","vol-80","vol-90"];for(var i=0,s=r.length;i<s;i++){var o=document.getElementById(r[i]),u=r[i].split("-")[1];o.setAttribute("data-volume",u/100);o.onclick=function(e){t.setVolume(this.getAttribute("data-volume"));e.preventDefault();return false}}})